{"uid":"22e437f98f28bdc9","name":"test_v_agg_data_segment_existence","fullName":"tests.test_v_agg_data_additional#test_v_agg_data_segment_existence","historyId":"655adafce3309140677cce2c800bc150","time":{"start":1712508861230,"stop":1712508862433,"duration":1203},"description":"\nПроверяет, что каждый сегмент устройства из v_agg_data существует в device_segments или помечен как 'non_target_device'.\n","descriptionHtml":"<p>Проверяет, что каждый сегмент устройства из v_agg_data существует в device_segments или помечен как 'non_target_device'.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup","time":{"start":1712508857036,"stop":1712508857038,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nПроверяет, что каждый сегмент устройства из v_agg_data существует в device_segments или помечен как 'non_target_device'.\n","status":"passed","steps":[{"name":"Проверка существования сегментов устройства\n\nExecuted query:\n\n        -- Выборка уникальных сегментов устройства из представления v_agg_data\n        SELECT DISTINCT v.device_segment\n        FROM `data-quality-project-1.dq_data_set.v_agg_data` v\n        -- Фильтрация сегментов, отличных от 'non_target_device', и проверка их наличия в device_segments\n        WHERE v.device_segment <> 'non_target_device' AND NOT EXISTS (\n            -- Подзапрос проверяет наличие сегмента из v_agg_data в таблице device_segments.\n            -- 'SELECT 1' используется для проверки существования записи: возвращает 1, если запись найдена.\n            SELECT 1\n            FROM `data-quality-project-1.dq_data_set.device_segments` ds\n            WHERE v.device_segment = ds.segment\n        )\n    ","time":{"start":1712508861230,"stop":1712508862205,"duration":975},"status":"passed","steps":[],"attachments":[{"uid":"8f05915c8b930916","name":"SQL Query","source":"8f05915c8b930916.txt","type":"text/plain","size":930}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"story","value":"View_Creation"},{"name":"severity","value":"critical"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_v_agg_data_additional"},{"name":"host","value":"8f0fa2841280"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_v_agg_data_additional"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[],"tags":[]},"source":"22e437f98f28bdc9.json","parameterValues":[]}